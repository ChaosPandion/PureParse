namespace PureParse.Benchmarks 

open System
open BenchmarkDotNet
open BenchmarkDotNet.Attributes
open PureParse
open PureParse.Examples
open System.Runtime.InteropServices;
open BenchmarkDotNet.Diagnostics.Windows.Configs;

[<CategoriesColumn>]
[<NativeMemoryProfiler>]
[<MemoryDiagnoser>]
type ArithmeticBenchmark () =
    class        
        [<Benchmark>]
        member _.EvalSmallExpression () =
            Arithmetic.evalText "1 + 1"

        [<Benchmark>]
        member _.EvalBigExpression () =
            Arithmetic.evalText "1 + 1 + 1000 * 20000 / 30000 + 2"

        [<Benchmark>]
        member _.EvalDeepExpression () =
            Arithmetic.evalText "1 + 1 + (1000 * (1000 * (1000 * (1000 * (1000 * 20000 / 30000) / 30000) / 30000) / 30000) / 30000) + 2"
    
        [<Benchmark>]
        member _.EvalHugeExpression () =
            Arithmetic.evalText "(5361.2927251412 / 8038.1904610714 - 1236.5543102816 / 2815.5952576441 / (((2486.3839207671 - 396.766123781 + 4364.5167037839 * (366.861075801) - (1434.1911673125)) * (7763.516530755 + (5053.3932390609) / 9553.8938727817 - (6491.2722467405)) + (5782.287752706 * 4674.9305487479 * 2171.1752957286) - 8611.63318884) - 3295.036761192 + (1498.5223065744 * 3701.2436541861 * 1304.4281273103 * 9901.0460076727))) + (2981.1835779179 - 5364.4173005727 + ((4965.5754935209 + 6575.6426974013 + 3625.6308700496) - (((6993.7413288638) * 1390.7288100005 * 2604.0709122814 + 3052.1667777823 + (4525.8886159226)) / 2206.9834811699 / ((5919.1425296386) - (6160.4648487399) - 1060.1538262825 / (5418.2156066326)) * 3708.4047554694) * 776.3196895993 * 9715.3974735361) - ((7365.7181805859 / ((4589.2572079255) - (4962.703187793) + (8827.5036444331) - 6253.4739218186) - 452.1883968744) / (((3450.1512102284) * (5352.540659201) / 5558.889243375 + 1472.220170465 + (4356.7275752755)) - 7884.6066979024 + ((1839.8879504053) / 3094.4347334753 / 5232.9918547251 / (6550.5667738461) + (4180.8192238922)) * ((8436.514734632) * 9868.9070473655 * 6432.778410484 * (5301.1000376887) - 3265.947611845) + 3633.5617600034) - 7637.0344360204 / (1403.0369760364 / (6135.7989017169 * 8898.4915452815 * (6469.4249744846)) * 5875.1742688969 + ((9477.1472651808) * (716.7317702503) / (8173.393559288) - (2497.4236057781) - (8538.0610881264))))) - 8226.6192597839 * (4793.7743804085 - 1120.9236939345 * 7781.5595759276) * ((((1389.2595605985 * 9881.9546998363 / (1562.629571527) * (6762.3050949792) / (8052.0178045084)) / (5069.2484662558 * (9211.3439974183) + 1694.2857214201) + ((4767.6965165121) + (2179.113044918) - (4307.9048720421) / 8026.2030183933 - 8826.5884638977)) / 2588.5686234585 * (1771.5102041174 - 7812.1791713976 * 1798.5179727772 - ((987.736591227) / (7878.3700260338) - (8988.2170938236)))) * 641.6414345628 / 9248.3844912009 + (921.7671492185 * (7339.9371439941 - ((9036.5602433751) * (8308.7242851275) - 4535.3088901928) / (1846.5007223013 * 1681.5536847362 * (9754.6836516981))) * ((5190.7781303461 * (6577.2434813083) / (656.5019576442) * (3599.9793582601)) + (9708.6091536182 + 4739.5601229955 * (4028.1910222853) * 1106.2061545637 + (2757.3867686332)) + 1893.5927623318 - (6767.2132224859 * (4351.0598445091) * 9094.1778596913) / 6800.6875837153)) + 7304.8373157621) * (9284.1594055076 - ((9521.0125570839 * ((6550.6470239593) + (2370.9239701046) - 313.7216029579 / 889.2282318394 + 2255.5579264484) - (2910.6667207514 - (8729.1427248333) - (3537.5210895308) - (1594.4781935697)) - 9433.3130353853) - 8098.3303868338 * 8231.1850893939 + (((4938.6581255851) / 9727.0900070661 + (4753.2228664359) / (4525.4687092112)) / (3571.7546039799 + (8108.5114459412) * (3297.4492024148) / (5350.3728331476) * 5540.3073099007) / 9507.1389331662 * ((2826.5975388504) + 1533.7424752157 - (1393.2497113206))) / 4135.0142104102) / 9932.1950620176 / ((8990.0017029623 + (7851.3987335566 + 4863.6292314171 / (2898.3647855316) / (2316.4540203656) / (6815.6422404896)) + 7960.8743950532 / 9046.1135350126 * 7793.0872447672) - ((5512.6011407849 / 2660.9087734066 - 2746.3493460141 / (4724.8277165254) / (4036.7823900078)) - 5364.1211361631 * (8551.2596919186 / (3952.9170200121) + 5489.8092540166 / 1048.4545653397 * 3679.4730598574) / 6809.6953315235 - 3465.8141733516) - 8536.089935619 * (((6378.1144816122) - 8948.0681665413 + (6487.3297265609) / 6196.0668988979) - 8984.9631436173 / 8195.8464256242 * (7923.6449921652 / 2961.2592834432 + 5129.144135574 / (650.2948835899) / 2720.7663158056) / 1422.809628093) - 631.5441173776)) / (9068.4223946421 - (8236.6008090592 + ((7330.6812727671 / (8065.9107350944) - 1738.674745039 + (2581.6175026414) / 4698.6188541086) * 7861.7283100735 - ((5742.045721443) + (6390.716093709) / (8185.9470320355)) * 6249.414863864 / (4541.2354943266 - 3033.3641959575 * (2583.2343866661) + (6983.0451474333) - (7006.5218809883))) * 7786.0459135207 - ((2638.6910200552 + (3695.4025119344) - (1279.3833473463)) * 4247.0354474393 - ((5384.7606714271) / 5594.8568318085 * (7775.032266707) + 8145.7825269618 / 9740.0582798558) * ((1197.7004138059) / (2820.1514226155) / 8512.1611651138 * 3417.9668542197) * 9614.9475018393)) + 250.0005900683) - (5575.3845187809 + 5216.8399580468 / 8860.3088676408 * (5619.9439337796 * (9436.0220247206 / ((5719.5017905181) / (407.7412164948) * 6398.1533770043) - 6743.6176850248 - 151.9466610729) - 6327.8265862391 * 9642.2224924935 / 6004.961911777) / ((9326.2386000895 * ((5961.978147812) + 9340.4375753919 * (2684.4155175856)) - 3785.0401404631) + 6204.398425618 / 8728.1652332134 * 7749.2125093285)) + (6766.2766548724 - 6542.2131951892 - 4147.8656339216) / (7778.7990125045 / (6127.37257187 / (625.4890000771 - 4442.0743209118 - (6016.3932024633 - 91.0756540937 / 5873.379226541 - 2002.8561453954 / (6422.6488591447)) * 6666.9700935181) * (((6744.3808729033) / 3539.498277804 + (8702.9411888949)) + 6986.0602591465 / ((3500.9363778707) * 5772.3654680328 - 9621.0804492768 - (8139.3400948558)))) - 2986.4884895275 * 8966.0858269147)"

    end

